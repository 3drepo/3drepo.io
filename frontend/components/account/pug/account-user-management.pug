.homeUserContent.userContentNoMargin.accountUserManagement
	md-content.md-whiteframe-1dp(
		aria-label="User Management",
		layout="column",
		flex)
		md-toolbar
			.md-toolbar-tools
				h2 User Management

		.teamspaceSelectWrapper(layout="row")
			md-input-container.teamspaceSelectContainer(md-no-float, flex)
				label Teamspace
				md-select(
					ng-model="vm.selectedTeamspace"
					placeholder="Select a teamspace"
					ng-change="vm.onTeamspaceChange()"
					ng-disabled="!vm.teamspaces.length")
					md-option(
						ng-value="teamspace.account"
						ng-repeat="teamspace in vm.teamspaces") {{::teamspace.account}}

		md-button.md-accent.md-fab.md-mini.addButton(
			aria-label="Add new job"
			ng-click="vm.toggleNewDataPanel()"
			ng-show="vm.selectedTab === vm.TABS_TYPES.JOBS"
			ng-class="{'active': vm.showAddingPanel}",
			ng-disabled="vm.isAddButtonDisabled()")
			md-icon.angular-material-icons add
			.addButtonEventCatcher
				md-tooltip All licenses have been assigned

		.addPanel(ng-if="vm.showAddingPanel")
			new-member-form(
				ng-if="vm.selectedTab === vm.TABS_TYPES.USERS"
				current-teamspace="vm.currentTeamspace.account"
				jobs="vm.jobs"
				title="vm.licencesLabel"
				on-save="vm.onMemberSave(newMember)")
			new-job-form(
				ng-if="vm.selectedTab === vm.TABS_TYPES.JOBS"
				current-teamspace="vm.currentTeamspace.account"
				jobs="vm.jobs"
				colors="vm.jobsColors"
				title="Add new job"
				on-save="vm.onJobSave(newJob)")

		.addPanelBackdrop(
			ng-class="{'addPanelBackdropVisible': vm.showAddingPanel}"
			ng-click="vm.toggleNewDataPanel(true)")

		.accountUserManagementLoader(ng-if="vm.isLoadingTeamspace" layout="row" layout-align="center center")
			md-progress-circular(md-mode="indeterminate" md-diameter="20")

		md-tabs(
			flex
			md-border-bottom
			md-selected="vm.selectedTab")
			md-tab(
				label="Users"
				md-on-select="vm.onTabChange()"
				ng-disabled="!vm.isTeamspaceAdmin")
				div(layout="column" layout-fill)
					users(
						flex
						layout="row"
						users="vm.users"
						jobs="vm.jobs"
						limit="vm.licencesLimit"
						active="vm.selectedTab === vm.TABS_TYPES.USERS"
						ng-if="!vm.isLoadingTeamspace"
						current-teamspace="vm.currentTeamspace"
						on-change="vm.onMembersChange(updatedMembers)")

			md-tab(label="Projects" md-on-select="vm.onTabChange()")
				div(layout="column" layout-fill)
					projects-permissions(
						flex
						ng-if="!vm.isLoadingTeamspace"
						layout="row"
						members="vm.users"
						projects="vm.projects"
						current-teamspace="vm.currentTeamspace"
						on-change="vm.onJobsChange(updatedJobs)")

			md-tab(
				label="Jobs"
				md-on-select="vm.onTabChange()"
				ng-disabled="!vm.isTeamspaceAdmin")
					div(layout="column" layout-fill)
						jobs(flex active="vm.selectedTab === vm.TABS_TYPES.JOBS")