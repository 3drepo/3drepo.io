.homeUserContent.userContentNoMargin.accountUserManagement
	md-content.md-whiteframe-1dp(
		aria-label="User Management",
		layout="column",
		flex)
		md-toolbar
			.md-toolbar-tools
				h2 User Management

		.teamspaceSelectWrapper(layout="row")
			md-input-container.teamspaceSelectContainer(md-no-float, flex)
				md-select(
					ng-model="vm.account"
					placeholder="Select a teamspace"
					ng-change="vm.onTeamspaceChange()"
					ng-disabled="!vm.teamspaces.length")
					md-option(
						ng-value="teamspace.account"
						ng-repeat="teamspace in vm.teamspaces") {{::teamspace.account}}

		md-button.md-accent.md-fab.md-mini.addButton(
			aria-label="Add new member"
			ng-if="!vm.isLoadingTeamspace"
			ng-click="vm.toggleNewDataPanel()"
			ng-class="{'active': vm.showAddingPanel}")
			md-icon.angular-material-icons add

		.addPanel(ng-if="vm.showAddingPanel")
			new-member-form(
				ng-if="vm.selectedTab === vm.TABS_TYPES.USERS"
				current-teamspace="vm.currentTeamspace.account"
				jobs="vm.jobs"
				on-save="vm.onMemberSave()")

		.addPanelBackdrop(
			ng-class="{'addPanelBackdropVisible': vm.showAddingPanel}"
			ng-click="vm.toggleNewDataPanel(true)")

		md-tabs(
			md-dynamic-height
			md-border-bottom
			md-selected="vm.selectedTab"
			md-on-select="vm.onTabChange()") 
			md-tab(label="Users")
				.usersList
					.usersListHeader(layout="row" layout-align="start center")
						.usersListCell(layout="row" layout-align="start center" flex="30")
							list-sort-button
							.usersListCellLabel User

						.usersListCell(layout="row" layout-align="start center" flex="25")
							list-sort-button
							.usersListCellLabel Job

						.usersListCell(layout="row" layout-align="start center" flex="30")
							list-sort-button
							.usersListCellLabel Permissions

					.usersListBody
						div.usersListRow(
							ng-repeat="member in vm.members track by member.user"
							layout="row"
							layout-align="start center")

							//User details
							member-card.usersListCell(data="member" flex="30")

							//Job
							.usersListCell(layout="row" layout-align="start center" flex="25")
								md-input-container(md-no-float)
									md-select(
										ng-model="member.job"
										placeholder="Select a job"
										ng-change="vm.onJobChange(member)")
										md-option(ng-value="" ng-if="vm.jobs.length && member.job")
											div(layout="row" layout-align="start center")
												span.usersListJobColor(ng-style="{'background-color': job.color}")
												.usersListJobName Unassign
										md-option(
											ng-value="job._id"
											ng-repeat="job in vm.jobs track by job._id")
											div(layout="row" layout-align="start center")
												span.usersListJobColor(ng-style="{'background-color': job.color}")
												.usersListJobName {{job._id}}
												

							//Permissions
							.usersListCell(layout="row" layout-align="start center" flex="30")
								md-input-container(md-no-float)
									md-select(
										ng-model="member.isAdmin"
										ng-disabled="member.isCurrentUser"
										placeholder="Select a permission"
										ng-change="vm.onPermissionsChange(member)")
										md-option(
											ng-value="value.isAdmin"
											ng-repeat="value in vm.TEAMSPACE_PERMISSIONS")
											div(layout="row" layout-align="start center") {{value.label}}

							.flex

							//Remove action
							md-button.md-icon-button.usersListRemoveButton(
								ng-if="!member.isCurrentUser"
								ng-click="vm.removeMember(member)")
								md-icon.angular-material-icons remove_circle
				.accountUserManagementFooter(
					layout="row"
					layout-align="end center") You have {{}} out of {{}} licences left

			md-tab(label="Jobs")
				.jobsList

			md-tab(label="Projects")
				.projectsList
						
